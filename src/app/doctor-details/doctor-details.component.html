<!-- Page Wrapper -->
<section class="doctors-page">
  <!-- Hero/Header -->
  <header class="page-hero">
    <div class="container">
      <!-- Breadcrumb -->
      <nav class="breadcrumb">
        <a routerLink="/home">Home</a>
        <span>/</span>
        <span>Our Doctors</span>
      </nav>
      <div *ngIf="specialization" class="active-filter">
        Showing specialists for: <strong>{{ specialization }}</strong>
        <a class="clear" [routerLink]="['/doctor-details']">Clear</a>
      </div>

      <!-- Specialization chips -->
      <div class="chips" *ngIf="specializations?.length">
        <button type="button"
                class="chip"
                *ngFor="let s of specializations"
                [class.active]="s.toLowerCase() === specialization.toLowerCase()"
                [routerLink]="['/doctor-details']" [queryParams]="{ specialization: s }">
          {{ s }}
        </button>
      </div>

      <!-- Enquiry form moved to right sidebar below -->
    </div>
  </header>

  <div class="container page-content">
    <div class="content-grid">
      <div class="main">
        <!-- Loading -->
        <div *ngIf="isLoading" class="loading">
          <div class="spinner"></div>
          <p>{{ "Loading doctors..." | autoTranslate }}</p>
        </div>

        <!-- Empty State -->
        <div *ngIf="!isLoading && doctors.length === 0" class="empty">
          <h3>No doctors found</h3>
          <p *ngIf="specialization">We couldn't find any {{ specialization.toLowerCase() }} specialists at this time.</p>
          <p *ngIf="!specialization">We couldn't find any doctors at this time.</p>
          <a routerLink="/doctor-details" class="btn primary">View all doctors</a>
        </div>

        <!-- Grid -->
        <div *ngIf="!isLoading && doctors.length > 0" class="grid">
          <article class="card" *ngFor="let doctor of visibleDoctors">
            <div class="media">
              <img [src]="doctor.image || 'assets/images/doctor-avatar.jpg'" [alt]="doctor.name" loading="lazy" />
            </div>
            <div class="body">
              <h3 class="name">{{ doctor.name }}</h3>
              <p class="specialty" *ngIf="doctor.specialization">{{ doctor.specialization }}</p>

              <ul class="meta">
                <li>
                  <i class="bx bxs-clinic"></i>
                  <span>{{ doctor.hospitalName || 'Hospital not specified' }}</span>
                </li>
                <li *ngIf="doctor.experience">
                  <i class="bx bxs-award"></i>
                  <span>{{ doctor.experience }}+ years</span>
                </li>
                <li *ngIf="doctor.education">
                  <i class="bx bxs-graduation"></i>
                  <span>{{ doctor.education }}</span>
                </li>
              </ul>

              <div class="actions">
                <a class="btn outline" [routerLink]="['/booking']">Book Consultation</a>
                <button type="button" class="btn" (click)="toggleExpanded(doctor)">{{ isExpanded(doctor) ? 'Hide' : 'View More' }}</button>
              </div>

              <div class="bio-expanded" *ngIf="doctor.description && isExpanded(doctor)">
                <p>{{ doctor.description }}</p>
              </div>
            </div>
          </article>
        </div>
      </div>
      <aside class="sidebar">
        <h2 class="sidebar-title">Our Doctors</h2>
        <p class="sidebar-subtitle">Find your ideal doctor. Expert care across leading specialties.</p>
        <!-- Enquiry Form (sticky on desktop) -->
        <form class="enquiry-form" (ngSubmit)="searchDoctors()" #enquiryForm="ngForm">
          <div class="row">
            <input type="text" name="name" [(ngModel)]="searchQuery.name" [placeholder]="'Patient Name' | autoTranslate" />
            <input type="tel" name="phone" [(ngModel)]="searchQuery.phone" [placeholder]="'Phone No.' | autoTranslate" />
            <input type="email" name="email" [(ngModel)]="searchQuery.email" [placeholder]="'Enter Email' | autoTranslate" required />
            <input type="text" name="city" [(ngModel)]="searchQuery.city" [placeholder]="'Enter City' | autoTranslate" required />
            <textarea name="message" [(ngModel)]="searchQuery.message" [placeholder]="'Enter Your Message...' | autoTranslate"></textarea>
            <button class="btn primary" type="submit" [disabled]="enquiryForm.invalid">{{ "SUBMIT NOW" | autoTranslate }}</button>
          </div>
        </form>

      </aside>
    </div>
    <!-- FAQ Full Width -->
    <section class="faq">
      <h2 class="animated-headline">{{ "Frequently Asked Questions" | autoTranslate }}</h2>
      <div class="accordion">
        <details>
          <summary>{{ "How do I choose the right specialist?" | autoTranslate }}</summary>
          <p>{{ "Use the specialty filter from the navigation. You can also compare experience, hospital and profile details." | autoTranslate }}</p>
        </details>
        <details>
          <summary>Can I book an online consultation?</summary>
          <p>Yes. Click "Book Consultation" to request a call-back and we will arrange the earliest slot.</p>
        </details>
        <details>
          <summary>Do you support international patients?</summary>
          <p>Absolutely. Our care team helps with visas, travel and treatment planning end-to-end.</p>
        </details>
      </div>
    </section>
  </div>
</section>
