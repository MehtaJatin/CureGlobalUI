<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
  <p>Loading hospital details...</p>
</div>

<!-- Not Found State -->
<div class="not-found-container" *ngIf="!loading && notFound">
  <div class="ast-container">
    <div class="not-found-content" style="text-align: center; padding: 100px 0;">
      <h2>Hospital Not Found</h2>
      <p>The hospital you're looking for doesn't exist or has been removed.</p>
      <a routerLink="/home" class="btn btn-primary">Back to Home</a>
    </div>
  </div>
</div>

<!-- Hospital Content -->
<div id="content" class="site-content" *ngIf="!loading && !notFound && hospital">
  <div class="ast-container">
    <div id="primary" class="content-area primary">
      <main id="main" class="site-main">
        <div class="hospital-detail-page">

          <!-- Hospital Cover Image -->
          <div class="hospital-cover-section">
            <div class="hospital-cover-image" *ngIf="hospital.images && hospital.images.length > 0">
              <img [src]="hospital.images[0]" [alt]="hospital.name" loading="lazy">
              <div class="hospital-cover-overlay">
                <h1 class="hospital-title">{{ hospital.name }}</h1>
              </div>
            </div>
          </div>

          <!-- Hospital Description -->
          <!-- <div class="hospital-description-section">
            <div [innerHTML]="hospital.description"></div>
          </div> -->

          <!-- Hospital Statistics -->
          <div class="hospital-stats-section">
            <div class="stats-grid">
              <div class="stat-item">
                <div class="stat-icon">
                  <i class="icon-location"></i>
                </div>
                <div class="stat-content">
                  <h3>Location</h3>
                  <p>{{ hospital.address.split(',').pop() }}</p>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">
                  <i class="icon-certificate"></i>
                </div>
                <div class="stat-content">
                  <h3>Established in</h3>
                  <p>{{ hospital.establishedYear }}</p>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">
                  <i class="icon-specialty"></i>
                </div>
                <div class="stat-content">
                  <h3>Accreditations</h3>
                  <p>{{ hospital.accreditations }}</p>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">
                  <i class="icon-beds"></i>
                </div>
                <div class="stat-content">
                  <h3>No. of Beds</h3>
                  <p>{{ hospital.totalBeds }}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Team and Specialties Section -->
          <div class="team-specialties-section">
            <h2>About {{hospital.name}}</h2>
            <div class="team-description">
             <p>{{hospital.description}}</p>

              <h3><strong>Specialties</strong></h3>
              <p>We offer over {{hospital.specialties?.length}} super specialties, such as:</p>
              <ul class="specialties-list">
                <li *ngFor="let specialty of hospital.specialties">{{ getSpecialityNameById(specialty) }}</li>
              </ul>
              <p>All your healthcare needs are covered under one roof.</p>

              <h3><strong>Centers of Excellence</strong></h3>
              <p>Each Center of Excellence is focused on delivering high-quality care through expert teams and the latest medical innovations.</p>
              <ul class="centers-list">
                <li *ngFor="let center of hospital.centers_of_excellence">
                  <strong>{{ center.name }}:</strong> {{ center.description }}
                </li>
              </ul>
            </div>
          </div>

          <!-- Amenities Tabs Section -->
          <div class="amenities-tabs-section">
            <div class="amenties-tabs-title">
              <h2>Amenities</h2>
            </div>
           
            <div class="tabs-container" style="margin-top: 10px;">
              <div class="tab-navigation">
                <button
                  *ngFor="let tab of getAmenityTabs()"
                  class="tab-btn"
                  [class.active]="selectedTab === tab.key"
                  (click)="selectTab(tab.key)"
                >
                  {{ tab.label }}
                </button>
              </div>

              <div class="tab-content">
                <!-- Dynamic Amenity Tabs -->
                <div 
                  *ngFor="let tab of getAmenityTabs()"
                  class="tab-pane" 
                  [class.active]="selectedTab === tab.key"
                >
                  <div class="amenity-columns" *ngIf="selectedTab === tab.key && getAmenitiesForTab(tab.key).length > 0; else noAmenities">
                    <div class="amenity-column">
                      <ul class="amenity-list">
                        <li *ngFor="let amenity of getAmenitiesForTab(tab.key).slice(0, Math.ceil(getAmenitiesForTab(tab.key).length / 2))">
                          <i class="icon-hand-point"></i>
                          <span>{{ amenity }}</span>
                        </li>
                      </ul>
                    </div>
                    <div class="amenity-column" *ngIf="getAmenitiesForTab(tab.key).length > 1">
                      <ul class="amenity-list">
                        <li *ngFor="let amenity of getAmenitiesForTab(tab.key).slice(Math.ceil(getAmenitiesForTab(tab.key).length / 2))">
                          <i class="icon-hand-point"></i>
                          <span>{{ amenity }}</span>
                        </li>
                      </ul>
                    </div>
                  </div>
                  <ng-template #noAmenities>
                    <div class="no-amenities">
                      <p>{{ tab.label }} information will be updated soon.</p>
                    </div>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>

          <!-- Our Doctors Section -->
          <div class="doctors-section">
            <h2>Our Doctors</h2>
            <div class="doctors-grid" *ngIf="hospital.doctors && hospital.doctors.length > 0; else noDoctors">
              <div class="doctor-card" *ngFor="let doctor of hospital.doctors">
                <div class="doctor-image">
                  <img 
                    [src]="doctor.image"
                    [alt]="doctor.name"
                    (error)="onImageError($event)"
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 2;"
                  />
                  
                </div>
                <div class="doctor-info">
                  <h3>{{ doctor.name }}</h3>
                  <p class="specialty">{{ doctor.specialty }}</p>
                  <p class="experience">{{ doctor.experience }} Experience</p>
                  <p class="qualification">{{ doctor.qualification }}</p>
                </div>
              </div>
            </div>
            <ng-template #noDoctors>
              <div class="no-doctors-found">
                <span>No Doctor Found</span>
              </div>
            </ng-template>
          </div>

          <!-- Photo Gallery Section -->
          <div class="photo-gallery-section">
            <h2>Photo Gallery</h2>
            <div class="photo-gallery" *ngIf="hospital.images && hospital.images.length > 0; else noGallery">
              <div class="gallery-grid">
                <div 
                  class="gallery-item" 
                  *ngFor="let image of hospital.images; let i = index"
                  (click)="openLightbox(i)"
                >
                  <img [src]="image" [alt]="'Hospital Image ' + (i + 1)" loading="lazy">
                  <div class="gallery-overlay">
                    <i class="icon-zoom"></i>
                  </div>
                </div>
              </div>
            </div>
            <ng-template #noGallery>
              <div class="no-gallery">
                <div class="no-gallery-icon">
                  <i class="icon-camera"></i>
                </div>
                <h3>No Photos Available</h3>
                <p>Photos of this hospital will be added soon.</p>
              </div>
            </ng-template>
          </div>

          <!-- Call to Action Section -->
          <div class="cta-section">
            <div class="cta-content">
              <div class="cta-animation">
                <!-- This would be where the Lottie animation goes -->
                <div class="animation-placeholder"></div>
              </div>
              <div class="cta-text">
                <h2>Patients around the world trust us</h2>
                <p>Join hundreds of satisfied patients who found the right treatment and care.</p>
                <div class="cta-button">
                  <a [href]="whatsappLink" target="_blank" class="whatsapp-btn">
                    <i class="fa-brands fa-whatsapp"></i>
                    {{ "Chat with Us" | autoTranslate }}
                  </a>
                </div>
              </div>
            </div>
          </div>

        </div>
      </main>
    </div>
  </div>
</div>

<!-- Lightbox Modal -->
<div class="lightbox-overlay" *ngIf="lightboxOpen" (click)="closeLightbox()">
  <div class="lightbox-container" (click)="$event.stopPropagation()">
    <button class="lightbox-close" (click)="closeLightbox()">
      <i class="icon-close"></i>
    </button>
    <button class="lightbox-prev" (click)="previousImage()" *ngIf="hasMultipleImages">
      <i class="icon-arrow-left"></i>
    </button>
    <button class="lightbox-next" (click)="nextImage()" *ngIf="hasMultipleImages">
      <i class="icon-arrow-right"></i>
    </button>
    <div class="lightbox-image-container">
      <img 
        [src]="currentImageSrc" 
        [alt]="'Hospital Image ' + (currentImageIndex + 1)"
        class="lightbox-image"
      >
    </div>
    <div class="lightbox-counter" *ngIf="hasMultipleImages">
      {{ currentImageIndex + 1 }} / {{ totalImages }}
    </div>
  </div>
</div>

